# Ark-Knights 开发进度

## 已完成功能

### ✅ 地图系统 (Map System)
- **房间生成** - BFS算法生成6个房间的随机地图，5×5网格布局
- **房间类型** - 起始房、普通房、武器房、道具房、终点房/Boss房
- **走廊连接** - 自动生成房间间的走廊通道，包含墙壁和地板
- **碰撞检测** - 完整的房间和走廊边界检测，防止穿墙
- **数值系统** - 房间26×18瓦片，走廊4/12瓦片，中心距960px
- **门系统** - 门宽4瓦片，支持四个方向，门口区域可通行

### ✅ 小地图 (MiniMap)
- **房间显示** - 实时显示已生成的房间布局
- **玩家位置** - 蓝色方块指示玩家当前所在房间
- **房间状态** - 显示已访问/未访问状态
- **UI定位** - 右上角固定位置显示

### ✅ 边界系统优化
- **偶数瓦片对齐** - 修复奇数瓦片导致的错位问题
- **玩家碰撞半径** - 考虑玩家16px半径，防止精灵伸入墙壁
- **统一边界计算** - 房间和走廊使用一致的边界逻辑
- **精确碰撞** - 四个方向对称的碰撞检测

## 美术资源 (已就绪)

### 敌人动画 (Enemy/)
- 阿咬 (AYao) - 小怪，近战
- 魂灵圣杯 (Cup) - 精英，飞行，分摊伤害
- 恐卡兹 (KongKaZi) - 小怪，击杀红标怪后生成
- 托生莲座 (Boat) - 精英，飞行，碰撞扣血
- 得意 (DeYi) - 小怪，自爆型
- 堂皇 (TangHuang) - 精英，辅助型
- 妒 (Du) - 精英，远程高伤
- 新硎 (XinXing) - 精英，近战高伤
- Boss - 奎隆·摩诃萨埵权化（两阶段）

所有敌人均含完整动画序列帧（移动/攻击/死亡）

## 待开发功能

### 🔄 摄像机系统 (下一阶段)
- 相机跟随玩家移动
- 房间切换时的平滑过渡
- 视野边界限制
- 缩放功能（可选）

### 📋 后续计划
- 敌人生成和AI系统
- 战斗系统完善
- 武器和道具系统
- Boss战斗机制
- UI/HUD界面
- 音效和音乐

## 技术规格

**地图配置：**
- 瓦片大小：32px
- 房间尺寸：26×18 tiles (832×576 px)
- 房间中心距：960px
- 门宽度：4 tiles
- 水平走廊：4×4 tiles (128×128 px)
- 垂直走廊：4×12 tiles (128×384 px)

**碰撞系统：**
- 玩家碰撞半径：16px (0.5 tile)
- 边界缩进：48px (1.5 tiles) = 墙壁 + 玩家半径
- 房间可行走区域：从第2列/行到倒数第2列/行

**代码结构：**
- `Map/Room` - 房间类，包含地图生成和边界
- `Map/Hallway` - 走廊类，带墙壁的通道
- `Map/MapGenerator` - BFS地图生成器
- `Map/MiniMap` - 小地图显示
- `Scenes/GameScene` - 主场景，碰撞检测

---

*最后更新：2025年12月21日*
